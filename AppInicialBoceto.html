<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Cervecer√≠a Craft & Beer - Aplicaci√≥n Completa</title>
    <style>
        /* ===== VARIABLES GLOBALES ===== */
        :root {
            --primary-color: #ff6b35;
            --primary-dark: #e55a2b;
            --secondary-color: #2c3e50;
            --success-color: #27ae60;
            --warning-color: #f39c12;
            --error-color: #e74c3c;
            --text-color: #333;
            --text-light: #666;
            --bg-color: #f8f9fa;
            --card-bg: #ffffff;
            --border-color: #e0e0e0;
            --shadow: 0 2px 8px rgba(0,0,0,0.1);
            --shadow-hover: 0 8px 25px rgba(0,0,0,0.15);
            --spacing-xs: 0.5rem;
            --spacing-sm: 1rem;
            --spacing-md: 1.5rem;
            --spacing-lg: 2rem;
            --spacing-xl: 3rem;
            --border-radius: 8px;
            --border-radius-lg: 12px;
        }

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Segoe UI', system-ui, sans-serif;
            line-height: 1.6;
            color: var(--text-color);
            background-color: var(--bg-color);
            min-height: 100vh;
            display: flex;
            flex-direction: column;
        }

        .container {
            width: 100%;
            max-width: 1200px;
            margin: 0 auto;
            padding: 0 var(--spacing-sm);
        }

        /* ===== COMPONENTES REUTILIZABLES ===== */
        .btn {
            padding: var(--spacing-xs) var(--spacing-md);
            border: none;
            border-radius: var(--border-radius);
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
            text-decoration: none;
            display: inline-block;
            text-align: center;
        }

        .btn-primary { background: var(--primary-color); color: white; }
        .btn-primary:hover { background: var(--primary-dark); transform: translateY(-2px); }
        .btn-secondary { background: transparent; color: var(--primary-color); border: 2px solid var(--primary-color); }
        .btn-secondary:hover { background: var(--primary-color); color: white; }

        .card {
            background: var(--card-bg);
            border-radius: var(--border-radius-lg);
            box-shadow: var(--shadow);
            padding: var(--spacing-lg);
            margin-bottom: var(--spacing-lg);
            transition: transform 0.3s ease, box-shadow 0.3s ease;
        }

        .card:hover {
            transform: translateY(-4px);
            box-shadow: var(--shadow-hover);
        }

        .form-group { margin-bottom: var(--spacing-md); }
        .form-label { display: block; margin-bottom: var(--spacing-xs); font-weight: 600; color: var(--secondary-color); }
        .form-input { width: 100%; padding: var(--spacing-sm); border: 2px solid var(--border-color); border-radius: var(--border-radius); font-size: 1rem; transition: border-color 0.3s ease; }
        .form-input:focus { outline: none; border-color: var(--primary-color); box-shadow: 0 0 0 3px rgba(255, 107, 53, 0.1); }

        .grid { display: grid; gap: var(--spacing-lg); }
        .grid-2 { grid-template-columns: repeat(auto-fit, minmax(300px, 1fr)); }
        .grid-3 { grid-template-columns: repeat(auto-fit, minmax(250px, 1fr)); }

        /* ===== HEADER ===== */
        .main-header {
            background: linear-gradient(135deg, var(--primary-color), var(--primary-dark));
            color: white;
            padding: var(--spacing-lg) 0;
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
            position: sticky;
            top: 0;
            z-index: 1000;
        }

        .header-content {
            display: flex;
            justify-content: space-between;
            align-items: center;
            flex-wrap: wrap;
            gap: var(--spacing-md);
        }

        .logo { font-size: 1.8rem; font-weight: bold; display: flex; align-items: center; gap: var(--spacing-xs); }
        .nav-links { display: flex; gap: var(--spacing-lg); list-style: none; flex-wrap: wrap; }
        .nav-links a { color: white; text-decoration: none; font-weight: 500; padding: var(--spacing-xs) var(--spacing-sm); border-radius: var(--border-radius); transition: background 0.3s ease; }
        .nav-links a:hover, .nav-links a.active { background: rgba(255,255,255,0.2); }
        .user-actions { display: flex; gap: var(--spacing-sm); align-items: center; }

        /* ===== HERO ===== */
        .hero {
            background: linear-gradient(rgba(0,0,0,0.7), rgba(0,0,0,0.7));
            background-size: cover;
            background-position: center;
            color: white;
            text-align: center;
            padding: var(--spacing-xl) 0;
            margin-bottom: var(--spacing-xl);
        }

        /* ===== COMPONENTES ESPEC√çFICOS ===== */
        .search-component, .filters-component, .auth-section { 
            background: var(--card-bg);
            padding: var(--spacing-lg);
            border-radius: var(--border-radius-lg);
            box-shadow: var(--shadow);
            margin-bottom: var(--spacing-lg);
        }

        .search-container { position: relative; max-width: 600px; margin: 0 auto; }
        .search-input { width: 100%; padding: var(--spacing-md); padding-left: 3rem; border: 2px solid var(--border-color); border-radius: 50px; font-size: 1.1rem; }
        .search-icon { position: absolute; left: var(--spacing-md); top: 50%; transform: translateY(-50%); color: var(--text-light); }

        .filters-grid { display: grid; grid-template-columns: repeat(auto-fit, minmax(250px, 1fr)); gap: var(--spacing-md); align-items: end; }

        .products-grid { display: grid; grid-template-columns: repeat(auto-fill, minmax(280px, 1fr)); gap: var(--spacing-lg); margin-bottom: var(--spacing-xl); }
        .product-card { background: var(--card-bg); border-radius: var(--border-radius-lg); box-shadow: var(--shadow); overflow: hidden; transition: transform 0.3s ease, box-shadow 0.3s ease; }
        .product-card:hover { transform: translateY(-4px); box-shadow: var(--shadow-hover); }
        .product-image { height: 200px; background: #f0f0f0; display: flex; align-items: center; justify-content: center; font-size: 3rem; color: var(--text-light); }
        .product-content { padding: var(--spacing-md); }
        .product-badge { background: var(--primary-color); color: white; padding: 0.25rem 0.75rem; border-radius: 20px; font-size: 0.8rem; font-weight: 500; display: inline-block; margin-bottom: var(--spacing-sm); }
        .product-price { font-size: 1.3rem; font-weight: 700; color: var(--success-color); margin: var(--spacing-xs) 0; }

        .auth-tabs { display: flex; margin-bottom: var(--spacing-md); border-bottom: 2px solid var(--border-color); }
        .auth-tab { padding: var(--spacing-sm) var(--spacing-md); cursor: pointer; border-bottom: 3px solid transparent; transition: all 0.3s ease; }
        .auth-tab.active { border-bottom-color: var(--primary-color); color: var(--primary-color); font-weight: 600; }
        .auth-form { display: none; }
        .auth-form.active { display: block; }

        .cart-sidebar {
            position: fixed;
            right: -400px;
            top: 0;
            width: 400px;
            height: 100vh;
            background: var(--card-bg);
            box-shadow: -5px 0 15px rgba(0,0,0,0.1);
            transition: right 0.3s ease;
            z-index: 1001;
            padding: var(--spacing-lg);
            overflow-y: auto;
        }
        .cart-sidebar.open { right: 0; }
        .cart-item { display: flex; gap: var(--spacing-sm); padding: var(--spacing-sm) 0; border-bottom: 1px solid var(--border-color); }
        .cart-item-image { width: 60px; height: 60px; background: #f0f0f0; border-radius: var(--border-radius); display: flex; align-items: center; justify-content: center; }

        .checkout-steps { display: flex; justify-content: space-between; margin-bottom: var(--spacing-xl); position: relative; }
        .checkout-steps::before { content: ''; position: absolute; top: 20px; left: 0; right: 0; height: 2px; background: var(--border-color); z-index: 1; }
        .step { text-align: center; position: relative; z-index: 2; background: var(--bg-color); padding: 0 var(--spacing-sm); }
        .step-number { width: 40px; height: 40px; border-radius: 50%; background: var(--border-color); color: var(--text-light); display: flex; align-items: center; justify-content: center; margin: 0 auto var(--spacing-xs); font-weight: 600; }
        .step.active .step-number { background: var(--primary-color); color: white; }

        .tracking-timeline { max-width: 600px; margin: var(--spacing-xl) auto; position: relative; }
        .timeline-item { display: flex; gap: var(--spacing-md); margin-bottom: var(--spacing-lg); position: relative; }
        .timeline-item::before { content: ''; position: absolute; left: 20px; top: 40px; bottom: -40px; width: 2px; background: var(--border-color); }
        .timeline-item:last-child::before { display: none; }
        .timeline-icon { width: 40px; height: 40px; border-radius: 50%; background: var(--primary-color); color: white; display: flex; align-items: center; justify-content: center; flex-shrink: 0; z-index: 2; }

        .admin-panel { background: var(--card-bg); padding: var(--spacing-lg); border-radius: var(--border-radius-lg); margin: var(--spacing-lg) 0; }
        .admin-grid { display: grid; grid-template-columns: repeat(auto-fit, minmax(300px, 1fr)); gap: var(--spacing-lg); }
        .admin-card { background: #f8f9fa; padding: var(--spacing-md); border-radius: var(--border-radius); border-left: 4px solid var(--primary-color); }

        .delivery-zones { background: var(--card-bg); padding: var(--spacing-lg); border-radius: var(--border-radius-lg); margin: var(--spacing-lg) 0; }
        .zone-card { background: #f0f8ff; padding: var(--spacing-md); border-radius: var(--border-radius); margin-bottom: var(--spacing-sm); border: 1px solid #b3d9ff; }

        /* ===== FOOTER ===== */
        .main-footer {
            background: var(--secondary-color);
            color: white;
            padding: var(--spacing-xl) 0;
            margin-top: auto;
        }
        .footer-content { display: grid; grid-template-columns: repeat(auto-fit, minmax(250px, 1fr)); gap: var(--spacing-xl); }
        .footer-section h3 { margin-bottom: var(--spacing-md); color: white; }
        .footer-links { list-style: none; }
        .footer-links a { color: #ccc; text-decoration: none; transition: color 0.3s ease; }
        .footer-links a:hover { color: white; }

        /* ===== RESPONSIVE ===== */
        @media (max-width: 768px) {
            .header-content { flex-direction: column; text-align: center; }
            .nav-links { justify-content: center; }
            .products-grid { grid-template-columns: repeat(auto-fill, minmax(250px, 1fr)); gap: var(--spacing-md); }
            .filters-grid { grid-template-columns: 1fr; }
            .cart-sidebar { width: 100%; right: -100%; }
            .hero h1 { font-size: 2rem; }
            .checkout-steps { flex-direction: column; gap: var(--spacing-md); }
            .checkout-steps::before { display: none; }
        }

        @media (max-width: 480px) {
            .products-grid { grid-template-columns: 1fr; }
            .search-input { padding: var(--spacing-sm); padding-left: 2.5rem; }
            .container { padding: 0 var(--spacing-xs); }
            .admin-grid { grid-template-columns: 1fr; }
        }

        .hidden { display: none; }
        .text-center { text-align: center; }
        .mt-0 { margin-top: 0; }
        .mb-0 { margin-bottom: 0; }
    </style>
</head>
<body>
    <!-- HEADER -->
    <header class="main-header">
        <div class="container">
            <div class="header-content">
                <div class="logo"><span>üç∫</span> Craft & Beer</div>
                <nav>
                    <ul class="nav-links">
                        <li><a href="#inicio" class="active">Inicio</a></li>
                        <li><a href="#catalogo">Cat√°logo</a></li>
                        <li><a href="#carrito" onclick="toggleCart()">Carrito</a></li>
                        <li><a href="#cuenta" onclick="showSection('auth')">Mi Cuenta</a></li>
                        <li><a href="#admin" onclick="showSection('admin')">Admin</a></li>
                    </ul>
                </nav>
                <div class="user-actions">
                    <button class="btn btn-secondary" onclick="toggleCart()">üõí Carrito <span id="cartCount">0</span></button>
                    <button class="btn btn-primary" onclick="showSection('auth')">Iniciar Sesi√≥n</button>
                </div>
            </div>
        </div>
    </header>

    <!-- HERO -->
    <section class="hero" id="inicio">
        <div class="container">
            <h1>Descubre el Arte de la Cerveza Artesanal</h1>
            <p>Las mejores cervezas directamente a tu puerta. Calidad premium, sabores √∫nicos.</p>
            <button class="btn btn-primary" style="padding: 12px 30px; font-size: 1.1rem;" onclick="showSection('catalogo')">
                Explorar Cervezas
            </button>
        </div>
    </section>

    <!-- MAIN CONTENT -->
    <main class="container">
        <!-- B√öSQUEDA (US-03) -->
        <section class="search-component">
            <div class="search-container">
                <div class="search-icon">üîç</div>
                <input type="text" class="search-input" placeholder="Buscar cervezas por nombre, tipo, descripci√≥n..." onkeyup="handleSearch(event)">
            </div>
        </section>

        <!-- FILTROS (US-02) -->
        <section class="filters-component">
            <h2 class="mt-0">Filtrar Cervezas</h2>
            <div class="filters-grid">
                <div class="form-group">
                    <label class="form-label">Tipo de Cerveza</label>
                    <select class="form-input" onchange="applyFilters()">
                        <option value="">Todos los tipos</option>
                        <option value="ipa">IPA</option>
                        <option value="stout">Stout</option>
                        <option value="lager">Lager</option>
                    </select>
                </div>
                
                <div class="form-group">
                    <label class="form-label">Precio M√°ximo</label>
                    <select class="form-input" onchange="applyFilters()">
                        <option value="">Sin l√≠mite</option>
                        <option value="5000">Hasta $5.000</option>
                        <option value="10000">Hasta $10.000</option>
                    </select>
                </div>
                
                <div class="form-group">
                    <button class="btn btn-primary" style="width: 100%;" onclick="applyFilters()">Aplicar Filtros</button>
                </div>
            </div>
        </section>

        <!-- CAT√ÅLOGO (US-01) -->
        <section id="catalogo">
            <h2>Nuestras Cervezas Artesanales</h2>
            <div class="products-grid" id="productsGrid">
                <!-- Los productos se cargan din√°micamente -->
            </div>
            
            <nav class="text-center">
                <button class="btn btn-secondary" onclick="changePage(-1)">‚Üê Anterior</button>
                <span style="margin: 0 15px; font-weight: bold;">P√°gina <span id="currentPage">1</span> de <span id="totalPages">3</span></span>
                <button class="btn btn-secondary" onclick="changePage(1)">Siguiente ‚Üí</button>
            </nav>
        </section>

        <!-- AUTENTICACI√ìN (US-04, US-05, US-06) -->
        <section id="auth" class="auth-section hidden">
            <div class="auth-tabs">
                <div class="auth-tab active" onclick="showAuthForm('login')">Iniciar Sesi√≥n</div>
                <div class="auth-tab" onclick="showAuthForm('register')">Registrarse</div>
                <div class="auth-tab" onclick="showAuthForm('recover')">Recuperar</div>
            </div>

            <form class="auth-form active" id="login-form">
                <div class="form-group">
                    <label class="form-label">Email</label>
                    <input type="email" class="form-input" placeholder="tu@email.com" required>
                </div>
                <div class="form-group">
                    <label class="form-label">Contrase√±a</label>
                    <input type="password" class="form-input" placeholder="‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢" required>
                </div>
                <button type="submit" class="btn btn-primary" style="width: 100%;">Iniciar Sesi√≥n</button>
            </form>

            <form class="auth-form" id="register-form">
                <div class="form-group">
                    <label class="form-label">Nombre Completo</label>
                    <input type="text" class="form-input" placeholder="Juan P√©rez" required>
                </div>
                <div class="form-group">
                    <label class="form-label">Email</label>
                    <input type="email" class="form-input" placeholder="tu@email.com" required>
                </div>
                <div class="form-group">
                    <label class="form-label">Contrase√±a</label>
                    <input type="password" class="form-input" placeholder="M√≠nimo 8 caracteres" required>
                </div>
                <button type="submit" class="btn btn-primary" style="width: 100%;">Registrarse</button>
            </form>

            <form class="auth-form" id="recover-form">
                <div class="form-group">
                    <label class="form-label">Email</label>
                    <input type="email" class="form-input" placeholder="tu@email.com" required>
                </div>
                <button type="submit" class="btn btn-primary" style="width: 100%;">Enviar Enlace de Recuperaci√≥n</button>
            </form>
        </section>

        <!-- CHECKOUT & PAGOS (US-08, US-09) -->
        <section id="checkout" class="hidden">
            <h2>Finalizar Compra</h2>
            <div class="checkout-steps">
                <div class="step active"><div class="step-number">1</div>Carrito</div>
                <div class="step"><div class="step-number">2</div>Env√≠o</div>
                <div class="step"><div class="step-number">3</div>Pago</div>
                <div class="step"><div class="step-number">4</div>Confirmaci√≥n</div>
            </div>

            <div class="grid grid-2">
                <div>
                    <h3>Resumen del Pedido</h3>
                    <div id="checkoutSummary"></div>
                </div>
                <div>
                    <h3>M√©todo de Pago</h3>
                    <div class="form-group">
                        <label class="form-label">Seleccionar m√©todo</label>
                        <select class="form-input">
                            <option value="webpay">Webpay</option>
                            <option value="transferencia">Transferencia</option>
                        </select>
                    </div>
                    <button class="btn btn-primary" style="width: 100%;">Pagar $<span id="totalAmount">0</span></button>
                </div>
            </div>
        </section>

        <!-- GESTI√ìN DE ZONAS (US-12) -->
        <section id="zones" class="delivery-zones hidden">
            <h2>Gesti√≥n de Zonas de Despacho</h2>
            <div class="grid grid-2">
                <div>
                    <h3>Zonas Activas</h3>
                    <div class="zone-card">
                        <h4>Santiago Centro</h4>
                        <p>Costo: $2.000 CLP | Tiempo: 1-2 d√≠as</p>
                    </div>
                    <div class="zone-card">
                        <h4>Providencia</h4>
                        <p>Costo: $1.500 CLP | Tiempo: 1 d√≠a</p>
                    </div>
                </div>
                <div>
                    <h3>Agregar Nueva Zona</h3>
                    <form>
                        <div class="form-group">
                            <label class="form-label">Comuna</label>
                            <input type="text" class="form-input" placeholder="Nombre de la comuna">
                        </div>
                        <div class="form-group">
                            <label class="form-label">Costo de despacho</label>
                            <input type="number" class="form-input" placeholder="Costo en CLP">
                        </div>
                        <button type="submit" class="btn btn-primary">Agregar Zona</button>
                    </form>
                </div>
            </div>
        </section>

        <!-- PANEL ADMIN (US-13, US-14, US-15) -->
        <section id="admin" class="admin-panel hidden">
            <h2>Panel de Administraci√≥n</h2>
            <div class="admin-grid">
                <div class="admin-card">
                    <h3>üöÄ CI/CD Pipeline</h3>
                    <p>Estado: <span style="color: var(--success-color);">‚úÖ Activo</span></p>
                    <p>√öltimo build: Hace 2 horas</p>
                    <button class="btn btn-primary">Ver Detalles</button>
                </div>
                
                <div class="admin-card">
                    <h3>üìä Monitoreo</h3>
                    <p>CPU: 45% | Memoria: 62%</p>
                    <p>Uptime: 99.8%</p>
                    <button class="btn btn-primary">Ver M√©tricas</button>
                </div>
                
                <div class="admin-card">
                    <h3>üíæ Backup</h3>
                    <p>√öltimo backup: Hoy 02:00</p>
                    <p>Estado: <span style="color: var(--success-color);">‚úÖ Completado</span></p>
                    <button class="btn btn-primary">Programar Backup</button>
                </div>
            </div>
        </section>
    </main>

    <!-- CARRITO -->
    <aside class="cart-sidebar" id="cartSidebar">
        <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 20px;">
            <h2 class="mt-0">üõí Tu Carrito</h2>
            <button onclick="toggleCart()" style="background: none; border: none; font-size: 1.5rem; cursor: pointer;">√ó</button>
        </div>
        
        <div id="cartItems"></div>
        
        <div style="border-top: 2px solid var(--border-color); padding-top: 20px; margin-top: 20px;">
            <div style="display: flex; justify-content: space-between; font-weight: bold; margin-bottom: 20px;">
                <span>Total:</span>
                <span>$<span id="cartTotal">0</span> CLP</span>
            </div>
            <button class="btn btn-primary" style="width: 100%;" onclick="showSection('checkout')">Proceder al Pago</button>
        </div>
    </aside>

    <!-- FOOTER -->
    <footer class="main-footer">
        <div class="container">
            <div class="footer-content">
                <div class="footer-section">
                    <h3>Craft & Beer</h3>
                    <p>Tu cervecer√≠a artesanal de confianza. Calidad premium desde 2024.</p>
                </div>
                
                <div class="footer-section">
                    <h3>Enlaces R√°pidos</h3>
                    <ul class="footer-links">
                        <li><a href="#catalogo" onclick="showSection('catalogo')">Cat√°logo</a></li>
                        <li><a href="#carrito" onclick="toggleCart()">Carrito</a></li>
                        <li><a href="#cuenta" onclick="showSection('auth')">Mi Cuenta</a></li>
                        <li><a href="#admin" onclick="showSection('admin')">Admin</a></li>
                    </ul>
                </div>
                
                <div class="footer-section">
                    <h3>Contacto</h3>
                    <ul class="footer-links">
                        <li>üìß contacto@craftbeer.cl</li>
                        <li>üìû +56 9 1234 5678</li>
                        <li>üìç Av. Siempre Viva 742, Santiago</li>
                    </ul>
                </div>
            </div>
        </div>
    </footer>

    <script>
        // ===== DATOS DE PRUEBA =====
        const products = [
            { id: 1, name: "IPA Artesanal", type: "IPA", price: 5500, description: "Cerveza IPA con intenso aroma a l√∫pulo y notas c√≠tricas." },
            { id: 2, name: "Stout Imperial", type: "Stout", price: 6200, description: "Stout robusta con notas de caf√© y chocolate negro." },
            { id: 3, name: "Lager Premium", type: "Lager", price: 4800, description: "Lager suave y refrescante, perfecta para cualquier ocasi√≥n." },
            { id: 4, name: "Porter Achocolatada", type: "Porter", price: 5800, description: "Porter con fuertes notas de chocolate y caf√©." },
            { id: 5, name: "Wheat Beer", type: "Wheat", price: 5200, description: "Cerveza de trigo con notas c√≠tricas y especiadas." },
            { id: 6, name: "Pale Ale", type: "Pale Ale", price: 5100, description: "Pale Ale equilibrada con aroma a l√∫pulo." }
        ];

        let cart = [];
        let currentPage = 1;
        const productsPerPage = 3;

        // ===== FUNCIONES PRINCIPALES =====
        function showSection(sectionId) {
            // Ocultar todas las secciones
            document.querySelectorAll('main > section').forEach(section => {
                section.classList.add('hidden');
            });
            
            // Mostrar la secci√≥n seleccionada
            document.getElementById(sectionId)?.classList.remove('hidden');
            
            // Si es cat√°logo, cargar productos
            if (sectionId === 'catalogo') {
                loadProducts();
            }
            
            // Si es checkout, cargar resumen
            if (sectionId === 'checkout') {
                loadCheckoutSummary();
            }
        }

        function loadProducts() {
            const grid = document.getElementById('productsGrid');
            const start = (currentPage - 1) * productsPerPage;
            const end = start + productsPerPage;
            const paginatedProducts = products.slice(start, end);

            grid.innerHTML = paginatedProducts.map(product => `
                <article class="product-card">
                    <div class="product-image">üç∫</div>
                    <div class="product-content">
                        <span class="product-badge">${product.type}</span>
                        <h3>${product.name}</h3>
                        <p style="color: var(--text-light); margin: 10px 0;">${product.description}</p>
                        <div class="product-price">$${product.price.toLocaleString()} CLP</div>
                        <button class="btn btn-primary" style="width: 100%; margin-top: 10px;" 
                                onclick="addToCart(${product.id})">
                            A√±adir al Carrito
                        </button>
                    </div>
                </article>
            `).join('');

            // Actualizar paginaci√≥n
            document.getElementById('currentPage').textContent = currentPage;
            document.getElementById('totalPages').textContent = Math.ceil(products.length / productsPerPage);
        }

        function addToCart(productId) {
            const product = products.find(p => p.id === productId);
            cart.push(product);
            updateCart();
            alert(`‚úÖ ${product.name} a√±adido al carrito!`);
        }

        function updateCart() {
            document.getElementById('cartCount').textContent = cart.length;
            document.getElementById('cartTotal').textContent = cart.reduce((sum, item) => sum + item.price, 0).toLocaleString();
            
            const cartItems = document.getElementById('cartItems');
            cartItems.innerHTML = cart.map(item => `
                <div class="cart-item">
                    <div class="cart-item-image">üç∫</div>
                    <div style="flex: 1;">
                        <h4>${item.name}</h4>
                        <p>$${item.price.toLocaleString()} CLP</p>
                    </div>
                    <div>
                        <button onclick="removeFromCart(${item.id})" style="background: none; border: none; font-size: 1.2rem; cursor: pointer;">üóëÔ∏è</button>
                    </div>
                </div>
            `).join('');
        }

        function removeFromCart(productId) {
            const index = cart.findIndex(item => item.id === productId);
            if (index > -1) {
                cart.splice(index, 1);
                updateCart();
            }
        }

        function toggleCart() {
            document.getElementById('cartSidebar').classList.toggle('open');
        }

        function changePage(direction) {
            const totalPages = Math.ceil(products.length / productsPerPage);
            currentPage += direction;
            
            if (currentPage < 1) currentPage = 1;
            if (currentPage > totalPages) currentPage = totalPages;
            
            loadProducts();
        }

        function showAuthForm(formType) {
            document.querySelectorAll('.auth-form').forEach(form => form.classList.remove('active'));
            document.querySelectorAll('.auth-tab').forEach(tab => tab.classList.remove('active'));
            
            document.getElementById(formType + '-form').classList.add('active');
            event.target.classList.add('active');
        }

        function loadCheckoutSummary() {
            const summary = document.getElementById('checkoutSummary');
            const total = cart.reduce((sum, item) => sum + item.price, 0);
            
            summary.innerHTML = `
                <div style="border-bottom: 1px solid var(--border-color); padding-bottom: 10px; margin-bottom: 10px;">
                    ${cart.map(item => `<div style="display: flex; justify-content: space-between; margin-bottom: 5px;">
                        <span>${item.name}</span>
                        <span>$${item.price.toLocaleString()}</span>
                    </div>`).join('')}
                </div>
                <div style="display: flex; justify-content: space-between; font-weight: bold;">
                    <span>Total:</span>
                    <span>$${total.toLocaleString()} CLP</span>
                </div>
            `;
            
            document.getElementById('totalAmount').textContent = total.toLocaleString();
        }

        function handleSearch(event) {
            if (event.key === 'Enter') {
                const term = event.target.value.toLowerCase();
                const results = products.filter(product => 
                    product.name.toLowerCase().includes(term) || 
                    product.type.toLowerCase().includes(term) ||
                    product.description.toLowerCase().includes(term)
                );
                
                if (results.length > 0) {
                    alert(`üîç Encontrados ${results.length} productos para "${term}"`);
                } else {
                    alert('‚ùå No se encontraron productos');
                }
            }
        }

        function applyFilters() {
            alert('‚úÖ Filtros aplicados correctamente');
        }

        // Cerrar carrito al hacer clic fuera
        document.addEventListener('click', function(event) {
            const cart = document.getElementById('cartSidebar');
            if (!cart.contains(event.target) && !event.target.closest('[onclick*="toggleCart"]')) {
                cart.classList.remove('open');
            }
        });

        // Inicializar
        document.addEventListener('DOMContentLoaded', function() {
            loadProducts();
            showSection('catalogo');
        });
    </script>
</body>
</html>